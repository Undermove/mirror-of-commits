<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>üé∞ Open Source Resurrection Machine</title>
<style>
body{
  margin:0;
  background:radial-gradient(circle at center,#0a0a0a,#000);
  color:#0f0;
  font-family:"Courier New",monospace;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  min-height:100vh;
  overflow:hidden;
  padding:20px 0;
  opacity:0;
  animation:fadeIn 2s forwards;
}
@keyframes fadeIn{to{opacity:1;}}
h1{
  color:#00ff9d;
  text-shadow:0 0 10px #00ff9d;
  margin:10px 0 5px 0;
  text-align:center;
  font-size:clamp(1.2rem,5vw,1.8rem);
}
.machine{
  position:relative;
  width:min(90vw,600px);
  height:auto;
  aspect-ratio:3/2;
  background:#111;
  border:4px solid #0f0;
  border-radius:25px;
  box-shadow:0 0 40px #0f0 inset,0 0 60px #040;
  padding:20px;
  overflow:visible;
  z-index:1;
}
.machine::before,.machine::after{
  content:"";
  position:absolute;
  top:-50%;
  left:-50%;
  width:200%;
  height:200%;
  background:radial-gradient(circle at 50% 50%,rgba(255,255,255,0.05) 0%,rgba(0,0,0,0) 70%);
  opacity:0.2;
  animation:smoke 10s infinite alternate ease-in-out;
  filter:blur(40px);
  z-index:-1;
}
.machine::after{
  animation-delay:5s;
}
@keyframes smoke{
  0%{transform:translate(0,0);}
  50%{transform:translate(10px,-10px);}
  100%{transform:translate(-10px,10px);}
}
.reels{
  display:flex;
  justify-content:center;
  gap:3vw;
  perspective:900px;
  margin-top:40px;
}
.reel{
  flex:1;
  min-width:90px;
  max-width:140px;
  height:30vh;
  max-height:200px;
  background:#020;
  border:2px solid #0f0;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:clamp(0.9rem,3vw,1.1rem);
  color:#0f0;
  box-shadow:inset 0 0 20px #000;
  transform-style:preserve-3d;
  cursor:pointer;
  transition:0.3s;
}
.reel.spin{animation:spin 0.5s linear infinite;}
@keyframes spin{from{transform:rotateX(0deg);}to{transform:rotateX(-360deg);}}
#msg{
  position:absolute;
  top:10px;
  left:0;
  width:100%;
  text-align:center;
  font-size:clamp(0.8rem,3vw,1rem);
  opacity:0.85;
  animation:floatText 3s ease-in-out infinite alternate;
}
@keyframes floatText{from{transform:translateY(0);}to{transform:translateY(6px);}}
.lever{
  position:absolute;
  right:-25px;
  top:15px;
  width:18px;
  height:220px;
  background:#333;
  border:2px solid #0f0;
  border-radius:10px;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  z-index:5;
}
.knob{
  width:38px;
  height:38px;
  background:#800;
  border:2px solid #0f0;
  border-radius:50%;
  box-shadow:0 0 15px red;
  position:relative;
  top:-20px;
  transition:transform 0.3s;
  animation:pulse 1.5s ease-in-out infinite alternate;
}
@keyframes pulse{from{box-shadow:0 0 10px red;}to{box-shadow:0 0 25px #f00;}}
.knob.dragging{transform:translateY(160px);}
#counter{
  margin-top:15px;
  text-align:center;
  font-size:clamp(1rem,3vw,1.2rem);
  color:#0f0;
}
#footer{
  margin-top:25px;
  text-align:center;
  font-size:clamp(0.9rem,3vw,1rem);
}
#footer a{
  color:#00ffaa;
  text-decoration:none;
  text-shadow:0 0 8px #00ffaa;
  transition:0.2s;
}
#footer a:hover{color:#fff;text-shadow:0 0 15px #0f0;}
</style>
</head>
<body>
<h1>ü™¶ Open Source Resurrection Machine</h1>
<div class="machine">
  <div id="msg">‚ò†Ô∏è Pull the lever to see dead repositories</div>
  <div class="lever" id="lever"><div class="knob" id="knob"></div></div>
  <div class="reels">
    <div class="reel" id="r1">üíÄ</div>
    <div class="reel" id="r2">üíÄ</div>
    <div class="reel" id="r3">üíÄ</div>
  </div>
</div>
<div id="counter"></div>
<div id="footer">
  üëª Follow the necromancer on <a href="https://t.me/dimasshortposts" target="_blank">Telegram</a>
</div>

<!-- –∑–≤—É–∫–∏ -->
<audio id="spinSound" src="https://actions.google.com/sounds/v1/ambiences/steam_engine_idle.ogg" preload="auto" loop></audio>
<audio id="stopSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>
<audio id="dingSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>
<audio id="cashSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_25c4d9d739.mp3?filename=cash-register-02.mp3" preload="auto"></audio>

<script>
const reels=document.querySelectorAll(".reel");
const knob=document.getElementById("knob");
const msg=document.getElementById("msg");
const counter=document.getElementById("counter");
const spinSound=document.getElementById("spinSound");
const stopSound=document.getElementById("stopSound");
const dingSound=document.getElementById("dingSound");
const cashSound=document.getElementById("cashSound");
let souls=Number(localStorage.getItem("soulsRevived")||0);
counter.innerText=`‚ú® Souls revived today: ${souls}`;
let isSpinning=false;
let triggered=false;

async function getRepos(){
  const page=Math.floor(Math.random()*30)+1;
  const url=`https://api.github.com/search/repositories?q=stars:>1000+pushed:<2021-01-01+archived:false&sort=stars&order=desc&per_page=3&page=${page}`;
  const resp=await fetch(url);
  const data=await resp.json();
  return data.items||[];
}
function startSpin(){
  if(isSpinning)return;
  isSpinning=true;
  msg.innerText="‚öôÔ∏è Spinning...";
  reels.forEach(r=>r.classList.add("spin"));
  spinSound.volume=0.15;spinSound.play().catch(()=>{});
}
function stopSpin(data){
  spinSound.pause();
  reels.forEach((r,i)=>{
    setTimeout(()=>{
      r.classList.remove("spin");
      stopSound.currentTime=0;stopSound.volume=0.3;stopSound.play().catch(()=>{});
      const repo=data[i];
      if(!repo){r.innerHTML="üíÄ Empty tomb";return;}
      const year=new Date(repo.pushed_at).getFullYear();
      r.innerHTML=`<div style="text-align:center;pointer-events:none">
        <strong>ü™¶ ${repo.name}</strong><br>‚≠ê ${repo.stargazers_count}<br>üï∞ ${year}
      </div>`;
      r.onclick=()=>{
        window.open(repo.html_url,"_blank");
        souls++;localStorage.setItem("soulsRevived",souls);
        counter.innerText=`‚ú® Souls revived today: ${souls}`;
        msg.innerText="‚≠ê Light a star to bless one of them";
        dingSound.play().catch(()=>{});
      };
      if(i===2)isSpinning=false;
    },2200+i*600);
  });
}
let dragging=false,startY=0;
knob.addEventListener("mousedown",e=>{dragging=true;startY=e.clientY;triggered=false;});
window.addEventListener("mousemove",e=>{
  if(!dragging)return;
  let offset=Math.min(Math.max(e.clientY-startY,0),200);
  knob.style.transform=`translateY(${offset}px)`;
  if(offset>100&&!triggered){
    triggered=true;
    cashSound.currentTime=0;cashSound.volume=0.4;cashSound.play().catch(()=>{});
  }
});
window.addEventListener("mouseup",async()=>{
  if(!dragging)return;dragging=false;
  const offset=parseInt(knob.style.transform.replace(/\D/g,''))||0;
  knob.style.transform='translateY(0px)';
  if(offset>100){
    startSpin();
    try{
      const data=await getRepos();
      setTimeout(()=>stopSpin(data),2500);
    }catch(e){
      msg.innerText="‚ö†Ô∏è Spirits refused to answer.";
      reels.forEach(r=>r.classList.remove("spin"));
      isSpinning=false;
    }
  }
});
knob.addEventListener("touchstart",e=>{dragging=true;startY=e.touches[0].clientY;triggered=false;});
window.addEventListener("touchmove",e=>{
  if(!dragging)return;
  let offset=Math.min(Math.max(e.touches[0].clientY-startY,0),200);
  knob.style.transform=`translateY(${offset}px)`;
  if(offset>100&&!triggered){
    triggered=true;
    cashSound.currentTime=0;cashSound.volume=0.4;cashSound.play().catch(()=>{});
  }
});
window.addEventListener("touchend",async()=>{
  if(!dragging)return;dragging=false;
  knob.style.transform='translateY(0px)';
  startSpin();
  try{
    const data=await getRepos();
    setTimeout(()=>stopSpin(data),2500);
  }catch(e){
    msg.innerText="‚ö†Ô∏è Spirits refused to answer.";
    reels.forEach(r=>r.classList.remove("spin"));
    isSpinning=false;
  }
});
</script>
</body>
</html>
