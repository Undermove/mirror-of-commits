<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>🪦 Open Source Resurrection Machine</title>
<style>
body {
  background: radial-gradient(circle at center, #050505, #000);
  color: #eee;
  font-family: "Courier New", monospace;
  text-align: center;
  overflow: hidden;
}
h1 {
  color: #00ff99;
  text-shadow: 0 0 10px #00ff99;
  margin-top: 30px;
}
#slots {
  display: flex;
  justify-content: center;
  gap: 25px;
  margin-top: 40px;
}
.slot {
  width: 240px;
  height: 160px;
  background: rgba(255,255,255,0.05);
  border: 1px solid #222;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  box-shadow: 0 0 15px #0f0;
  transition: transform 0.8s ease-out;
  transform-style: preserve-3d;
}
.slot.spin {
  animation: spin 1s linear infinite;
}
@keyframes spin {
  0% { transform: rotateY(0deg); }
  100% { transform: rotateY(360deg); }
}
button {
  background: #111;
  color: #00ff99;
  border: 1px solid #00ff99;
  padding: 10px 25px;
  font-size: 1.2rem;
  cursor: pointer;
  margin-top: 25px;
  transition: 0.2s;
}
button:hover { background: #00ff99; color: #000; }
a {
  color: #00ffaa;
  text-decoration: none;
}
a:hover { text-decoration: underline; }
#msg { margin-top: 25px; opacity: 0.8; }
#counter { margin-top: 10px; color: #00ffaa; font-size: 1.1rem; }
</style>
</head>
<body>
<h1>🪦 Open Source Resurrection Machine</h1>
<p>Spin to find legendary repos lost in time... and give them a star ⭐</p>

<div id="slots">
  <div class="slot">💀</div>
  <div class="slot">💀</div>
  <div class="slot">💀</div>
</div>

<button id="spin">🎰 SPIN</button>
<div id="msg"></div>
<div id="counter"></div>

<script>
const msg = document.getElementById("msg");
const counter = document.getElementById("counter");
const slots = document.querySelectorAll(".slot");

let souls = Number(localStorage.getItem("soulsRevived") || 0);
counter.innerText = `✨ Souls revived today: ${souls}`;

async function spin() {
  msg.innerText = "Summoning forgotten legends...";
  slots.forEach(s => { s.classList.add("spin"); s.innerText = "💀"; });

  const page = Math.floor(Math.random() * 30) + 1;
  const url = `https://api.github.com/search/repositories?q=stars:>1000+pushed:<2021-01-01+archived:false&sort=stars&order=desc&per_page=3&page=${page}`;

  try {
    const resp = await fetch(url);
    const data = await resp.json();
    await new Promise(r => setTimeout(r, 2000)); // imitate spin time
    slots.forEach(s => s.classList.remove("spin"));

    data.items.forEach((repo, i) => {
      const year = new Date(repo.pushed_at).getFullYear();
      slots[i].innerHTML = `
        <h3>🪦 ${repo.name}</h3>
        <p>${repo.stargazers_count} ⭐ · last commit: ${year}</p>
        <p><a href="${repo.html_url}" target="_blank">Bless this repo ↗</a></p>
      `;
      const link = slots[i].querySelector("a");
      link.addEventListener("click", () => {
        souls++;
        localStorage.setItem("soulsRevived", souls);
        counter.innerText = `✨ Souls revived today: ${souls}`;
        msg.innerText = "💫 A lost repo feels warmth again...";
      });
    });
  } catch (e) {
    msg.innerText = "⚠️ Spirits refused to answer.";
    slots.forEach(s => s.classList.remove("spin"));
  }
}

document.getElementById("spin").onclick = spin;
</script>
</body>
</html>
